<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to the ‘CCAMLRGIS’ R package • CCAMLRGIS</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to the ‘CCAMLRGIS’ R package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CCAMLRGIS</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.2.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/CCAMLRGIS_R.html">Introduction to the 'CCAMLRGIS' R package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to the ‘CCAMLRGIS’ R package</h1>
                        <h4 class="author">Lucy Robinson</h4>
            
            <h4 class="date">2018-06-21</h4>
      
      
      <div class="hidden name"><code>CCAMLRGIS_R.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This vignette describes the R package “CCAMLRGIS”. The CCAMLRGIS package was developed to create new georeferenced data in the CCAMLR Convention Area for visualisation (i.e. mapping) and/or analyses and for reading existing georeferenced data that is displayed on the CCAMLR online GIS (<a href="https://gis.ccamlr.org/" class="uri">https://gis.ccamlr.org/</a>) directly from the webpoint end service into R. The package has a number of create functions for creating polygons, polygon grids, lines or points and a series of load functions for reading existing georeferenced data that has been agreed by the Commission and is documented in CCAMLR’s Conservation Measures or in Scientific Committee reports.</p>
<p>The main purpose of this package is to: (1) facilitate the use of CCAMLR’s spatial data by members and the wider scientific R user community and; (2) To ensure the spatial data presented at CCAMLR’s Working Group meetings and the Scientific committee conforms with standard projection currently adopted by CCAMLR i.e. the South Pole Lambert Azimuthal Equal Area projection. Defined as EPSG 102020 or more specifically: +proj=laea +lat_0=-90 +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0</p>
<p>To install the CCAMLRGIS from github you will firstly need to install devtools (i.e. install.packages(“devtools”)) and then use the following command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"lucymerobinson/CCAMLRGIS"</span>,<span class="dt">build_vignettes=</span><span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="create-polygons" class="section level2">
<h2 class="hasAnchor">
<a href="#create-polygons" class="anchor"></a>Create Polygons</h2>
<p>The create_Polys function has been developed to create polygons that conform to CCAMLR’s standards/specifications that can be used in analyses or to generate maps in R.</p>
<p>See ?create_Polys for function input specifications</p>
<div id="example-of-creating-a-proposed-research-block" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-creating-a-proposed-research-block" class="anchor"></a>Example of creating a proposed Research block</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(CCAMLRGIS)
<span class="co"># Create research block polygon </span>

<span class="co"># specify the name of the Research block</span>
Name &lt;-<span class="st">"5841_6"</span>
<span class="co"># specify the Latitude coordinates in decimal degrees</span>
Lats &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="fl">64.0</span>, <span class="op">-</span><span class="fl">65.5</span>, <span class="op">-</span><span class="fl">65.5</span>,<span class="op">-</span><span class="fl">64.0</span>)

<span class="co"># specify the Longitude coordinates in decimal degrees</span>
Lons &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">130</span>, <span class="dv">130</span>, <span class="dv">134</span>, <span class="dv">134</span>)

<span class="co"># bind information together into a dataframe for input into the create_Polys function see ?create_Polys </span>
Coords &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Name=</span><span class="kw">rep</span>(Name,<span class="kw">length</span>(Lons)),<span class="dt">Lats=</span>Lats,<span class="dt">Lons=</span>Lons)

<span class="co"># create polygon of proposed Research area to use in further Analyses</span>
New_RB &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_Polys.html">create_Polys</a></span>(Coords)</code></pre></div>
<p>The function automatically calculates a plantimetric area estimate (in km2) based on the geometry of “New_RB”. For details on how this area is calculated see ?create_Polys and to access the estimates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">New_RB<span class="op">$</span>AreaKm2</code></pre></div>
<pre><code>## [1] 31851</code></pre>
<p>The SpatialPolygonDataFrame “New_RB”" can be used in further analyses in R (as per the above example) because the default parameter option for OutputFormat=“ROBJECT”. You can also output as an ESRI Shapefile for use in other programs by specifying OutputFormat=“SHAPEFILE” and a name for example: OutputName=“RB_5841_6”</p>
</div>
</div>
<div id="load-ccamlrs-reference-data-into-r" class="section level2">
<h2 class="hasAnchor">
<a href="#load-ccamlrs-reference-data-into-r" class="anchor"></a>Load CCAMLR’s reference data into R</h2>
<p>CCAMLR’s reference data include management areas, defined in Conservation Measures and/or Scientific Committee reports (e.g. ASD’s, SSRU’s, etc). The text and/or geographical coordinates that are used to create polygons that define the reference area boundaries are stores in the CCAMLR’s central database in SQL Server Spatial. These data, that are displayed as layers on the online GIS, are also stored in GeoJSON format, in an online geoserver repository, that allows them to be loaded directly into R.</p>
<div id="example-of-loading-asds-into-r" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-loading-asds-into-r" class="anchor"></a>Example of loading ASD’s into R</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load ASDs from the online GIS - you will need to be online for this to work see </span>
?load_ASDs 
ASDs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_ASDs.html">load_ASDs</a></span>(<span class="st">"GEOJSON"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># index ASD in the area of interest - e.g. 58.4.1</span>
ASD_<span class="dv">5841</span> &lt;-<span class="st"> </span>ASDs[ASDs<span class="op">$</span>GAR_Short_Label<span class="op">%in%</span><span class="st">"5841"</span>,]</code></pre></div>
</div>
<div id="prepare-a-simple-map-with-the-proposed-research-block" class="section level3">
<h3 class="hasAnchor">
<a href="#prepare-a-simple-map-with-the-proposed-research-block" class="anchor"></a>Prepare a simple map with the proposed Research Block</h3>
<p>The plot function from the raster package is used for plotting maps as it will accept all spatial data/Raster objects see ?raster::plot for further details</p>
</div>
<div id="load-graticule-library-that-will-be-added-to-map-plot-below" class="section level3">
<h3 class="hasAnchor">
<a href="#load-graticule-library-that-will-be-added-to-map-plot-below" class="anchor"></a>Load graticule library that will be added to map plot below</h3>
<p>See ?graticule for function input specifications</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add graticules and store locations of labels</span>
<span class="kw">library</span>(graticule)</code></pre></div>
<pre><code>## Loading required package: sp</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&gt; Loading required package: sp</span>

<span class="co"># create graticules for plotting below</span>
meridians &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">80</span>,<span class="dv">150</span>, <span class="dt">by =</span> <span class="dv">10</span>)
parallels &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">90</span>, <span class="op">-</span><span class="dv">55</span>, <span class="dt">by =</span> <span class="dv">5</span>)


mlim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">min</span>(meridians), <span class="kw">max</span>(meridians))
plim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">min</span>(parallels), <span class="kw">max</span>(parallels))
grat &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/graticule/topics/graticule">graticule</a></span>(<span class="dt">lons =</span> meridians, <span class="dt">lats =</span> parallels, <span class="dt">xlim =</span> mlim, <span class="dt">ylim =</span> plim, <span class="dt">proj =</span> raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(New_RB))
labs &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/graticule/topics/graticule_labels">graticule_labels</a></span>(meridians, parallels, <span class="dt">xline =</span> <span class="dv">140</span>, <span class="dt">yline =</span> <span class="op">-</span><span class="fl">57.5</span>, <span class="dt">proj =</span> raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(New_RB))</code></pre></div>
</div>
<div id="plot-asd-and-research-blocks-with-graticules" class="section level3">
<h3 class="hasAnchor">
<a href="#plot-asd-and-research-blocks-with-graticules" class="anchor"></a>Plot ASD and Research Blocks with graticules</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(ASD_<span class="dv">5841</span>)
<span class="kw">text</span>(sp<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/sp/topics/coordinates">coordinates</a></span>(ASD_<span class="dv">5841</span>), <span class="dt">labels=</span><span class="kw">as.character</span>(ASD_<span class="dv">5841</span><span class="op">$</span>GAR_Short_Label),<span class="dt">cex=</span><span class="dv">1</span>,<span class="dt">col=</span><span class="st">"black"</span>)
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(New_RB,<span class="dt">add=</span><span class="ot">TRUE</span>,<span class="dt">border=</span><span class="st">"red"</span>)
<span class="kw">text</span>(sp<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/sp/topics/coordinates">coordinates</a></span>(New_RB), <span class="dt">labels=</span><span class="kw">as.character</span>(New_RB<span class="op">$</span>name),<span class="dt">cex=</span><span class="dv">1</span>,<span class="dt">col=</span><span class="st">"black"</span>)
<span class="co"># add graticules to plot</span>
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(grat, <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">lty =</span> <span class="dv">3</span>,<span class="dt">lwd=</span><span class="fl">1.5</span>)
<span class="kw">text</span>(labs, <span class="dt">lab =</span> <span class="kw">parse</span>(<span class="dt">text=</span> labs<span class="op">$</span>lab), <span class="dt">col=</span> <span class="st">"black"</span>, <span class="dt">cex =</span> <span class="fl">0.7</span>)</code></pre></div>
<p><img src="CCAMLRGIS_R_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
</div>
<div id="create-polygon-grid" class="section level2">
<h2 class="hasAnchor">
<a href="#create-polygon-grid" class="anchor"></a>Create Polygon Grid</h2>
<p>Polygon grids are useful for displaying catch quantities at a resolution that can be specified by the user. The create_PolysGrids function has been developed to create polygon grids to display variation in quantity of target species catch.</p>
<p>See ?create_PolysGrids for function input specifications</p>
<div id="example-of-creating-a-polygon-grid-that-could-represent-catch-data" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-creating-a-polygon-grid-that-could-represent-catch-data" class="anchor"></a>Example of creating a Polygon Grid that could represent catch data</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create example catch data with Longitude and Latitude</span>

<span class="co"># specify the Latitude coordinates in decimal degrees</span>
Lats &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>,<span class="dt">mean=</span><span class="op">-</span><span class="dv">62</span>,<span class="dt">sd=</span><span class="fl">0.25</span>)
<span class="co"># specify the Longitude coordinates in decimal degrees</span>
Lons &lt;-<span class="kw">sample</span>(<span class="kw">seq</span>(<span class="op">-</span><span class="dv">60</span>,<span class="op">-</span><span class="dv">50</span>,<span class="fl">0.01</span>),<span class="dv">1000</span>,<span class="dt">replace=</span><span class="ot">TRUE</span>)

Catch &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">100</span><span class="op">:</span><span class="dv">1000</span>,<span class="kw">length</span>(Lons),<span class="dt">replace =</span> <span class="ot">TRUE</span>)
<span class="co"># bind information together into a dataframe for input into the create_Polys function see ?create_Polys </span>
Catch_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Lats=</span>Lats,<span class="dt">Lons=</span>Lons,<span class="dt">Catch=</span>Catch)

<span class="co"># create polygon of proposed Research area to use in further Analyses</span>
New_Grid &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_PolyGrids.html">create_PolyGrids</a></span>(Catch_data,<span class="dt">dlon=</span><span class="dv">2</span>,<span class="dt">dlat=</span><span class="dv">1</span>)</code></pre></div>
<p>The SpatialPolygonDataFrame “New_Grid”" can be used in further analyses in R (as per the above example) because the default parameter option for OutputFormat=“ROBJECT”. You can also output as an ESRI Shapefile for use in other programs by specifying OutputFormat=“SHAPEFILE” and a file name. For example OutputName=“Catch_Grid”</p>
<p>The function automatically summarises the numerical data included in each polygon grids . For details on summary output see ?create_PolyGrids. The summary information appears as follows. Note this only includes data on the first six polygon grids</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(New_Grid<span class="op">@</span>data)</code></pre></div>
<pre><code>##    name Count Max Min   Mean StdDev Median   Sum
## 1 Catch     1 488 488 488.00     NA  488.0   488
## 2 Catch    99 993 115 542.00 267.24  545.0 53658
## 3 Catch    88 961 106 516.95 249.67  528.0 45492
## 4 Catch    94 996 101 547.47 258.23  527.5 51462
## 5 Catch   103 990 105 506.94 253.61  475.0 52215
## 6 Catch    92 991 100 530.30 281.07  528.5 48788</code></pre>
</div>
<div id="prepare-a-simple-map-of-the-polygon-grid" class="section level3">
<h3 class="hasAnchor">
<a href="#prepare-a-simple-map-of-the-polygon-grid" class="anchor"></a>Prepare a simple map of the Polygon Grid</h3>
</div>
<div id="install-and-load-classint-and-rcolorbrewer-package-" class="section level3">
<h3 class="hasAnchor">
<a href="#install-and-load-classint-and-rcolorbrewer-package-" class="anchor"></a>install and load classInt and RColorBrewer package.</h3>
<p>The ClassInt package will find appropriate intervals for plotting</p>
<p>The RColorBrewer package provides a variety of color ramps for plotting</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(c("classInt","RColorBrewer"))</span>
<span class="kw">library</span>(classInt)</code></pre></div>
<pre><code>## Loading required package: spData</code></pre>
<pre><code>## To access larger datasets in this package, install the spDataLarge
## package with: `install.packages('spDataLarge',
## repos='https://nowosad.github.io/drat/', type='source'))`</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RColorBrewer)</code></pre></div>
</div>
<div id="plot-polygon-grid-of-catch-with-subarea-48-1-coastline-and-graticules" class="section level3">
<h3 class="hasAnchor">
<a href="#plot-polygon-grid-of-catch-with-subarea-48-1-coastline-and-graticules" class="anchor"></a>Plot Polygon Grid of Catch with Subarea 48.1, Coastline and graticules</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># specify lables for graticules</span>
meridians &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">70</span>,<span class="op">-</span><span class="dv">50</span>, <span class="dt">by =</span> <span class="dv">10</span>)
parallels &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">90</span>, <span class="op">-</span><span class="dv">55</span>, <span class="dt">by =</span> <span class="dv">5</span>)

mlim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">min</span>(meridians), <span class="kw">max</span>(meridians))
plim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">min</span>(parallels), <span class="kw">max</span>(parallels))
grat &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/graticule/topics/graticule">graticule</a></span>(<span class="dt">lons =</span> meridians, <span class="dt">lats =</span> parallels, <span class="dt">xlim =</span> mlim, <span class="dt">ylim =</span> plim, <span class="dt">proj =</span> raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(New_Grid))

labs &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/graticule/topics/graticule_labels">graticule_labels</a></span>(meridians, parallels, <span class="dt">xline =</span> <span class="op">-</span><span class="dv">55</span>, <span class="dt">yline =</span> <span class="op">-</span><span class="dv">62</span>, <span class="dt">proj =</span> raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(New_Grid))

<span class="co">#specify colour ramp</span>
cols &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/RColorBrewer/topics/ColorBrewer">brewer.pal</a></span>(<span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">name =</span> <span class="st">"RdYlGn"</span>)
breaks&lt;-<span class="kw"><a href="http://www.rdocumentation.org/packages/classInt/topics/classIntervals">classIntervals</a></span>(New_Grid<span class="op">$</span>Sum,<span class="dv">5</span>)
<span class="co"># add a very small value to the top breakpoint, and subtract from the bottom for symmetry </span>
br &lt;-<span class="st"> </span>breaks<span class="op">$</span>brks
offs &lt;-<span class="st"> </span><span class="fl">0.0000001</span> 
br[<span class="dv">1</span>] &lt;-<span class="st"> </span>br[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>offs 
br[<span class="kw">length</span>(br)] &lt;-<span class="st"> </span>br[<span class="kw">length</span>(br)] <span class="op">+</span><span class="st"> </span>offs 

<span class="kw">plot</span>(ASDs[ASDs<span class="op">$</span>GAR_Short_Label<span class="op">%in%</span><span class="st">"481"</span>,])
<span class="co"># add Coastline data</span>
<span class="kw">plot</span>(Coastline_data,<span class="dt">add=</span><span class="ot">TRUE</span>)
<span class="kw">plot</span>(New_Grid, <span class="dt">col=</span><span class="kw">rev</span>(cols)[<span class="kw">cut</span>(New_Grid<span class="op">$</span>Sum, br)],<span class="dt">add=</span><span class="ot">TRUE</span>)
<span class="co"># add graticules to plot</span>
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(grat, <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">lty =</span> <span class="dv">3</span>,<span class="dt">lwd=</span><span class="fl">1.5</span>)
<span class="kw">text</span>(labs, <span class="dt">lab =</span> <span class="kw">parse</span>(<span class="dt">text=</span> labs<span class="op">$</span>lab), <span class="dt">col=</span> <span class="st">"black"</span>, <span class="dt">cex =</span> <span class="fl">0.7</span>)</code></pre></div>
<p><img src="CCAMLRGIS_R_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
</div>
<div id="create-lines" class="section level2">
<h2 class="hasAnchor">
<a href="#create-lines" class="anchor"></a>Create Lines</h2>
<p>It can be useful to useful to create spatial line data to represent/analyse a variety of data such as longline sets, vessel tracks or animal tracks. The create_Lines function has been developed to create spatial lines that conform to CCAMLR’s standards/specifications that can be used in analyses or to generate maps in R.</p>
<p>see ?create_Lines for function specifications</p>
<div id="example-of-creating-lines-that-could-represent-longline-sets" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-creating-lines-that-could-represent-longline-sets" class="anchor"></a>Example of creating lines that could represent longline sets</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## specify the name of the lines

Name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">"Set_1"</span>,<span class="dv">2</span>),<span class="kw">rep</span>(<span class="st">"Set_2"</span>,<span class="dv">2</span>))

## specify the Longitude coordinates in decimal degrees

Lon &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">99</span>,<span class="op">-</span><span class="fl">98.5</span>,<span class="op">-</span><span class="dv">101</span>,<span class="op">-</span><span class="fl">101.3</span>)

## specify the Latitude coordinates in decimal degrees
 
Lat&lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="fl">69.1</span>,<span class="op">-</span><span class="fl">69.1</span>,<span class="op">-</span><span class="fl">70.2</span>,<span class="op">-</span><span class="dv">70</span>)

## bind information together into a dataframe 

Coords&lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Name=</span>Name,<span class="dt">Lat=</span>Lat,<span class="dt">Lon=</span>Lon)

## create polygon of proposed Research area

New_Lines &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_Lines.html">create_Lines</a></span>(Coords)</code></pre></div>
<p>The SpatialLineDataFrame “New_Lines” can be used in further analyses in R (as per the above example) because the default parameter option for OutputFormat=“ROBJECT”. You can also output as an ESRI Shapefile for use in other programs by specifying OutputFormat=“SHAPEFILE” and and output name for example: OutputName=“Longlines_Subarea883”</p>
<p>The create_Lines function also calculates the length of the line that you create in kilometers and nautical miles. This can be accessed using</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># to access line length in km</span>
New_Lines<span class="op">$</span>LengthKm</code></pre></div>
<pre><code>## [1] 20.25 24.84</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># to access line length in NM</span>
New_Lines<span class="op">$</span>LengthNm</code></pre></div>
<pre><code>## [1] 10.93 13.41</code></pre>
</div>
<div id="plot-lines-with-graticules" class="section level3">
<h3 class="hasAnchor">
<a href="#plot-lines-with-graticules" class="anchor"></a>Plot Lines with graticules</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create graticules for plotting below</span>
meridians &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">105</span>,<span class="op">-</span><span class="dv">95</span>, <span class="dt">by =</span> <span class="dv">1</span>)
parallels &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">90</span>, <span class="op">-</span><span class="dv">55</span>, <span class="dt">by =</span> <span class="dv">1</span>)


mlim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">min</span>(meridians), <span class="kw">max</span>(meridians))
plim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">min</span>(parallels), <span class="kw">max</span>(parallels))
grat &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/graticule/topics/graticule">graticule</a></span>(<span class="dt">lons =</span> meridians, <span class="dt">lats =</span> parallels, <span class="dt">xlim =</span> mlim, <span class="dt">ylim =</span> plim, <span class="dt">proj =</span> raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(New_Lines))
labs &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/graticule/topics/graticule_labels">graticule_labels</a></span>(meridians, parallels, <span class="dt">xline =</span> <span class="op">-</span><span class="fl">100.2</span>, <span class="dt">yline =</span> <span class="op">-</span><span class="fl">69.5</span>, <span class="dt">proj =</span> raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(New_Lines))


<span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(New_Lines,<span class="dt">col=</span><span class="st">"red"</span>)
<span class="co"># add graticules to plot</span>
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(grat, <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">lty =</span> <span class="dv">3</span>,<span class="dt">lwd=</span><span class="fl">1.5</span>)
<span class="kw">text</span>(labs, <span class="dt">lab =</span> <span class="kw">parse</span>(<span class="dt">text=</span> labs<span class="op">$</span>lab), <span class="dt">col=</span> <span class="st">"black"</span>, <span class="dt">cex =</span> <span class="fl">0.7</span>)</code></pre></div>
<p><img src="CCAMLRGIS_R_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
</div>
<div id="create-points" class="section level2">
<h2 class="hasAnchor">
<a href="#create-points" class="anchor"></a>Create Points</h2>
<p>It can be useful to useful to create spatial point data to represent survey sites, fishing locations and VME locations. The create_Points function has been developed to create spatial points that can be used in analyses or to generate maps in R.</p>
<p>see ?create_Lines for function specifications</p>
<div id="example-of-creating-points-that-could-represent-survey-sites" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-creating-points-that-could-represent-survey-sites" class="anchor"></a>Example of creating points that could represent survey sites</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># specify the name of the points</span>

Name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Point_1"</span>,<span class="st">"Point_2"</span>,<span class="st">"Point_3"</span>)

<span class="co"># specify the Latitude coordinates in decimal degrees</span>

Lat&lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="fl">70.2</span>,<span class="op">-</span><span class="fl">70.1</span>,<span class="op">-</span><span class="fl">69.9</span>)

<span class="co"># specify the Longitude coordinates in decimal degrees</span>

Lon &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">160</span>,<span class="op">-</span><span class="dv">161</span>,<span class="op">-</span><span class="dv">159</span>)

<span class="co"># bind information together into a dataframe </span>

Coords&lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Name=</span>Name,<span class="dt">Lat=</span>Lat,<span class="dt">Lon=</span>Lon)

<span class="co"># create points </span>

New_Points &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_Points.html">create_Points</a></span>(Coords)</code></pre></div>
</div>
<div id="plot-points-in-subarea-88-2-with-graticules" class="section level3">
<h3 class="hasAnchor">
<a href="#plot-points-in-subarea-88-2-with-graticules" class="anchor"></a>Plot points in Subarea 88.2 with graticules</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create graticules for plotting below</span>
meridians &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">180</span>,<span class="op">-</span><span class="dv">100</span>, <span class="dt">by =</span> <span class="dv">10</span>)
parallels &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">90</span>, <span class="op">-</span><span class="dv">55</span>, <span class="dt">by =</span> <span class="dv">5</span>)


mlim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">min</span>(meridians), <span class="kw">max</span>(meridians))
plim &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">min</span>(parallels), <span class="kw">max</span>(parallels))
grat &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/graticule/topics/graticule">graticule</a></span>(<span class="dt">lons =</span> meridians, <span class="dt">lats =</span> parallels, <span class="dt">xlim =</span> mlim, <span class="dt">ylim =</span> plim, <span class="dt">proj =</span> raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(New_Points))
labs &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/graticule/topics/graticule_labels">graticule_labels</a></span>(meridians, parallels, <span class="dt">xline =</span> <span class="op">-</span><span class="dv">140</span>, <span class="dt">yline =</span> <span class="op">-</span><span class="fl">67.5</span>, <span class="dt">proj =</span> raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(New_Points))


<span class="co"># set plotting margins to zero on all sides</span>
<span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))

<span class="co"># select Subarea 88.2 from ASDs polygon data</span>

raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(ASDs[ASDs<span class="op">$</span>GAR_Short_Label<span class="op">%in%</span><span class="st">"882"</span>,])

<span class="co"># add points to the plot</span>

raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(New_Points,<span class="dt">col=</span><span class="st">"red"</span>,<span class="dt">add=</span><span class="ot">TRUE</span>,<span class="dt">pch=</span><span class="dv">20</span>)

<span class="co"># add graticules to plot</span>

raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(grat, <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">lty =</span> <span class="dv">3</span>,<span class="dt">lwd=</span><span class="fl">1.5</span>)
<span class="kw">text</span>(labs, <span class="dt">lab =</span> <span class="kw">parse</span>(<span class="dt">text=</span> labs<span class="op">$</span>lab), <span class="dt">col=</span> <span class="st">"black"</span>, <span class="dt">cex =</span> <span class="fl">0.7</span>)</code></pre></div>
<p><img src="CCAMLRGIS_R_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
</div>
</div>
<div id="calculate-seabed-area" class="section level2">
<h2 class="hasAnchor">
<a href="#calculate-seabed-area" class="anchor"></a>Calculate seabed area</h2>
<p>Calculating seabed area within particular depth ranges can be useful in a CCAMLR context for designing depth stratified surveys for estimating local toothfish biomass. The seabed_area function has been developed to provide seabed_area estimates within what is commonly classified as a fishable seabed depth range of 600-1800m.</p>
<p>To see input requirements see ?seabed_area</p>
<div id="bathymetry-data" class="section level3">
<h3 class="hasAnchor">
<a href="#bathymetry-data" class="anchor"></a>Bathymetry data</h3>
<p>Bathymetry data is necessary to calculate planimetric seabed area restricted by depth range(s). A processed version of the General Bathymetric Chart of the Oceans (GEBCO) 2014 data, that has been restricted to a Research Block in Subarea 48.2 (482_S) within a fishable depth range (600-1800m), has been included for the examples below, but the full dataset (across the Convention Area) can be requested from the CCAMLR Secretariat.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bathymetry_data_fn &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>,<span class="st">"GEBCO_2014_600_1800m_482_S.grd"</span>,<span class="dt">package =</span> <span class="st">"CCAMLRGIS"</span>)

bathymetry_data &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/raster">raster</a></span>(bathymetry_data_fn)</code></pre></div>
</div>
<div id="example-of-estimating-fishable-seabed-area-in-a-research-block" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-estimating-fishable-seabed-area-in-a-research-block" class="anchor"></a>Example of estimating fishable seabed area in a Research Block</h3>
<p>Load Research Block data and restrict the attribute data stored in the SpatialPolygonDataFrame to “GAR_Short_Label”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load Research Blocks from the online GIS - you will need to be online for this to work see </span>
RBs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_RBs.html">load_RBs</a></span>(<span class="st">"GEOJSON"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># select data column names in GAR_Short_Label</span>
RBs &lt;-<span class="st"> </span>RBs[,<span class="kw">names</span>(RBs)<span class="op">%in%</span><span class="st">"GAR_Short_Label"</span>]</code></pre></div>
<p>Select a Research Block of interest. For example, the Research Block in Subarea 48.2 - 482_S</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">RB_482_S &lt;-<span class="st"> </span>RBs[RBs<span class="op">$</span>GAR_Short_Label<span class="op">%in%</span><span class="st">"482_S"</span>,]</code></pre></div>
<p>Estimate fishable seabed area in Research Block 482_S</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seabed_area_482_S &lt;-<span class="st"> </span><span class="kw"><a href="../reference/seabed_area.html">seabed_area</a></span>(<span class="dt">bathymetry =</span> bathymetry_data,<span class="dt">Polys =</span> RB_482_S,<span class="dt">fishable_area =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>The output from the function is two column dataframe. The first column, under the column name “Polys” contains the label or name of the polygon(s) included in the SpatialPolygonDataFrame input into the seabed_area function. The second column, under the column name “Fishable area”, is the estimated planimetric seabed area (km2) in the fishable depth range.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seabed_area_482_S</code></pre></div>
<pre><code>##   Polys Fishable_area
## 1 482_S       2268.75</code></pre>
</div>
</div>
<div id="example-of-estimating-seabed-area-within-a-number-of-depth-classes-in-a-research-block" class="section level1">
<h1 class="hasAnchor">
<a href="#example-of-estimating-seabed-area-within-a-number-of-depth-classes-in-a-research-block" class="anchor"></a>Example of estimating seabed area within a number of depth classes in a Research Block</h1>
<p>Specify depth classes, within the fishable seabed area depth range, at 300m depth intervals in Research Block 482_S</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">depth_classes &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"600-900"</span>,<span class="st">"900-1200"</span>,<span class="st">"1200-1500"</span>,<span class="st">"1500-1800"</span>)</code></pre></div>
<p>Estimate seabed area within depth classes</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seabed_area_by_depth_classes &lt;-<span class="st"> </span><span class="kw"><a href="../reference/seabed_area.html">seabed_area</a></span>(bathymetry_data,RB_482_S,<span class="dt">fishable_area=</span><span class="ot">FALSE</span>,<span class="dt">depth_classes =</span> depth_classes)</code></pre></div>
<p>The output from the function is dataframe. The first column, under the column name “Polys” contains the label or name of the polygon(s) included in the SpatialPolygonDataFrame input into the seabed_area function. The second column, under the column name “Total area”,is the estimated planimetric seabed area (km2) across all depth classes and each subsequent column after the “Total area” is named after the depth classes included. In this example the “Total area” should be equal to the “Fishable area” given the example bathymetry data provided in the R package is already restricted to the 600-1800 m depth range.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seabed_area_by_depth_classes</code></pre></div>
<pre><code>##   Polys Total_area 600-900 900-1200 1200-1500 1500-1800
## 1 482_S    2268.75  188.25   300.75    479.25    1300.5</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#create-polygons">Create Polygons</a></li>
      <li><a href="#load-ccamlrs-reference-data-into-r">Load CCAMLR’s reference data into R</a></li>
      <li><a href="#create-polygon-grid">Create Polygon Grid</a></li>
      <li><a href="#create-lines">Create Lines</a></li>
      <li><a href="#create-points">Create Points</a></li>
      <li><a href="#calculate-seabed-area">Calculate seabed area</a></li>
      <li><a href="#example-of-estimating-seabed-area-within-a-number-of-depth-classes-in-a-research-block">Example of estimating seabed area within a number of depth classes in a Research Block</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Stephane Thanassekos, Lucy Robinson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
